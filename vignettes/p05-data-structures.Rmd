---
title: "Data Structures"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Data Structures}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
  %\VignetteDepends{knitr,shortestpath}
---
```{r, echo = FALSE, message = FALSE}
library(shortestpath)
library(knitr)
opts_chunk$set(dev = "svg")
```
```{r, echo = FALSE}
set.seed(22)
```
The data structure within the shortest path package is based on the igraph package. However, additional attributes have been added to the igraph graph in order to show the steps of finding a shortest path by the corresponding algorithm. The resulting object is called spgraph.

##spgraph
The spgraph is an igraph graph with the following attributes:
```{r, message=FALSE}
library(igraph)
graph <- make_ring(4) %>%
    set_edge_attr("weight", value = c(2,2,3,1) ) %>%
    as.spgraph()

d <- dijkstra(graph, "A", "C")
d
```
Each algorithm (in this case dijkstra) returns a list of spgraphs, which is called spresults (details will follow).  
<br><br>
The important additional attributes are `min\_dists` and `shortest\_path_predecessors`.
```{r}
d$min_dists
d$shortest_path_predecessors
```
The shortest path predecessors is a matrix of `igraph.vs` lists, which allows us to reconstruct the actual path of vertices representing the shortest path. Each algorithm is able to indentfy <u>all</u> shortest paths (see example vertex C has more than one predecessor).  
<br><br>
The data of the list can be accessed by the following:
```{r}
d$shortest_path_predecessors[[3]]
```
Further explanation of the data type matrix of lists can be found <a href="http://stackoverflow.com/questions/30007890/how-to-create-a-matrix-of-lists-in-r" tabindex="4">here</a>.

##spresults
The object spresults is a list of spgraphs, each representing one optimization step of the corresponding shortest path algorithm. By simply calling the object `d`, without an index it will always return the last spgraph in the list. 
```{r}
#shortest path predecessors of the first optimization step
d[[1]]$shortest_path_predecessors

#shortest path predecessors of the last optimization step
d$shortest_path_predecessors
```


##Graph Modification
The shortestpath package provides various graph modification functions for spgraphs and igraphs that are used internally.

```{r,fig.width=4, fig.height=3}
par(mar = c(0,0,0,0))
g <- random.graph.game(10, 0.5) %>%
  setAlphabeticalVertexNames %>%
  setRandomEdgeWeights()

plot(g)
E(g)$weight
```
  
Further details can be found in the R documentation: `?graphModification`
